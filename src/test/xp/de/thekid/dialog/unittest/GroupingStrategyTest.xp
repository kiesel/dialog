package de.thekid.dialog.unittest;

import unittest.TestCase;
import unittest.AssertionFailedError;
import unittest.PrerequisitesNotMetError;
import de.thekid.dialog.AlbumImage;
import de.thekid.dialog.GroupingStrategy;

public class GroupingStrategyTest extends TestCase {
  private AlbumImage $image;

  /** Create image taken at my birth date */
  public void setUp() throws AssertionFailedError, PrerequisitesNotMetError {
    $this.image= new AlbumImage($this.name).withExifData(new img.util.ExifData()
      .withDateTime(new util.Date('1977-12-14 11:45:00'))
    );
  }

  [@test]
  public void byHour() {
    $this.assertEquals('1977-12-14 11', GroupingStrategy::$hour.groupFor($this.image));
  }

  [@test]
  public void byDay() {
    $this.assertEquals('1977-12-14', GroupingStrategy::$day.groupFor($this.image));
  }

  [@test, @expect('lang.IllegalArgumentException')]
  public void byHourWithoutExif() {
    $this.image.setExifData(null);
    GroupingStrategy::$hour.groupFor($this.image);
  }

  [@test, @expect('lang.IllegalArgumentException')]
  public void byDayWithoutExif() {
    $this.image.setExifData(null);
    GroupingStrategy::$day.groupFor($this.image);
  }
}
